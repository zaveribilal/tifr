<!DOCTYPE html>
<html>

<head>
	<!--Import Google Icon Font-->
	<link href="https://fonts.googleapis.com/icon?family=Roboto" rel="stylesheet">
	<!--Import materialize.css-->
	<link type="text/css" rel="stylesheet" href="./css/materialize.min.css" media="screen,projection" />
	<!--Let browser know website is optimized for mobile-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<style>
		.form-adjustment{
      		margin-top: 150px;
      		/* vertical-align: 80vh; */
    	}
    	body {
   			/* background-image: url("Website.jpg"); */
   			/* background-repeat: no-repeat; */
      		background-color:#e3f2fd;
      	}	 

		#prof_pic{
			width: 100px;
		}

		::-webkit-file-upload-button{
			text-decoration: none;
			color: #fff;
			background-color: #26a69a;
			text-align: center;
			letter-spacing: .5px;
			-webkit-transition: background-color .2s ease-out;
			transition: background-color .2s ease-out;
			cursor: pointer;
			border: none;
			border-radius: 2px;
			display: inline-block;
			height: 36px;
			line-height: 36px;
			padding: 0 16px;
			text-transform: uppercase;
			vertical-align: middle;
			-webkit-tap-highlight-color: transparent;
			-webkit-box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12), 0 1px 5px 0 rgba(0,0,0,0.2);
    		box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12), 0 1px 5px 0 rgba(0,0,0,0.2);
		}
  </style>
</head>

<body>
	<div class="row ">
		<div class="col l12 m12 s12 ">
			<div class="input-field col offset-s4 form-adjustment">
				<label for="Name">Search</label>
				<input placeholder="Enter the Email,ccode,Phone-number" id="data" type="text">
				<button id="email_search" class="waves-effect waves-light btn">Submit</button>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col l4 offset-l4 m12 s12">
			<h6>
				Details of employee
			</h6>
		</div>
	</div>

	<div id="result" class="container">
		<div class="row">
			<form action="include/update.php" method="POST" enctype="multipart/form-data">
				<div class="img-holder col l12 m12 s12">
					<div class="row">
						<img id="prof_pic" src="" />
					</div>
					<input id="chooser" type="file" name="prof_pic">
					<p id="chooser_ph">Choose a picture</p>
				</div>
				<div class="col l6 m12 s12">
					<div class="input-field">
						<label for="surname">surname</label>
						<input id="surname" type="text" name="surname" id="surname" placeholder="Surname">
					</div>
					<div class="input-field">
						<label for="restname">restname</label>
						<input id="restname" type="text" name="restname" id="restname" placeholder="Restname">
					</div>
					<div class="input-field">
						<label for="dept">dept</label>
						<input id="dept" type="text" name="dept" placeholder="dept">
					</div>
					<div class="input-field">
						<label for="room_no">room_no</label>
						<input id="room_no" type="text" name="room_no" placeholder="room_no">
					</div>
					<div class="input-field">
						<label for="office">office</label>
						<input id="office" type="text" name="office" placeholder="office">
					</div>
					<div class="input-field">
						<label for="residence">residence</label>
						<input id="residence" type="text" name="residence" placeholder="residence">
					</div>
					<div class="input-field">
						<label for="email">email</label>
						<input id="email" type="text" name="email" placeholder="email">
					</div>
					<div class="input-field">
						<label for="off_1">off_1</label>
						<input id="off_1" type="text" name="off_1" placeholder="off_1">
					</div>
					<div class="input-field">
						<label for="mobile">mobile</label>
						<input id="mobile" type="text" name="mobile" placeholder="mobile">
					</div>
					<div class="input-field">
						<label for="ccode">ccode</label>
						<input id="ccode" type="text" name="ccode" placeholder="ccode">
					</div>
					<div class="input-field">
						<label for="fax">fax</label>
						<input id="fax" type="text" name="fax" placeholder="fax">
					</div>
					<div class="input-field">
						<label for="off_res_ext">off_res_ext</label>
						<input id="off_res_ext" type="text" name="off_res_ext" placeholder="off_res_ext">
					</div>
					<div class="input-field">
						<label for="off_2">off_2</label>
						<input id="off_2" type="text" name="off_2" placeholder="off_2">
					</div>
					<div class="input-field">
						<label for="off_mob">off_mob</label>
						<input id="off_mob" type="text" name="off_mob" placeholder="off_mob">
					</div>
					<div class="input-field">
						<label for="designation">designation</label>
						<input id="designation" type="text" name="designation" placeholder="designation">
					</div>
					<div class="input-field">
						<label for="role">role</label>
						<input id="role" type="text" name="role" placeholder="role">
					</div>
					<div class="input-field">
						<label for="dob">dob</label>
						<input id="dob" type="text" name="dob" placeholder="dob">
					</div>
					<div class="input-field">
						<label for="expiry">expiry</label>
						<input id="expiry" type="text" name="expiry" placeholder="expiry">
					</div>
					<div class="input-field">
						<label for="identity">identity</label>
						<input id="identity" type="text" name="identity" placeholder="identity">
					</div>
					<div class="input-field">
						<label for="project">project</label>
						<input id="project" type="text" name="project" placeholder="project">
					</div>
				</div>
				<div class="col l6">
					<div class="input-field">
						<label for="sup_email">sup_email</label>
						<input id="sup_email" type="text" name="sup_email" placeholder="sup_email">
					</div>
					<div class="input-field">
						<label for="homepage">homepage</label>
						<input id="homepage" type="text" name="homepage" placeholder="homepage">
					</div>
					<div class="input-field">
						<label for="street">street</label>
						<input id="street" type="text" name="street" placeholder="street">
					</div>
					<div class="input-field">
						<label for="city">city</label>
						<input id="city" type="text" name="city" placeholder="city">
					</div>
					<div class="input-field">
						<label for="pincode">pincode</label>
						<input id="pincode" type="text" name="pincode" placeholder="pincode">
					</div>
					<div class="input-field">
						<label for="keyphrase_1">keyphrase_1</label>
						<input id="keyphrase_1" type="text" name="keyphrase_1" placeholder="keyphrase_1">
					</div>
					<div class="input-field">
						<label for="keyphrase_2">keyphrase_2</label>
						<input id="keyphrase_2" type="text" name="keyphrase_2" placeholder="keyphrase_2">
					</div>
					<div class="input-field">
						<label for="keyphrase_3">keyphrase_3</label>
						<input id="keyphrase_3" type="text" name="keyphrase_3" placeholder="keyphrase_3">
					</div>
					<div class="input-field">
						<label for="telid">telid</label>
						<input id="telid" type="text" name="telid" placeholder="telid">
					</div>
					<div class="input-field">
						<label for="photo_disp">photo_disp</label>
						<input id="photo_disp" type="text" name="photo_disp" placeholder="photo_disp">
					</div>
					<div class="input-field">
						<label for="photo">photo</label>
						<input id="photo" type="text" name="photo" placeholder="photo">
					</div>
					<div class="input-field">
						<label for="design_code">design_code</label>
						<input id="design_code" type="text" name="design_code" placeholder="design_code">
					</div>
					<div class="input-field">
						<label for="metadata">metadata</label>
						<input id="metadata" type="text" name="metadata" placeholder="metadata">
					</div>
					<div class="input-field">
						<label for="pvt_email">pvt_email</label>
						<input id="pvt_email" type="text" name="pvt_email" placeholder="pvt_email">
					</div>
					<div class="input-field">
						<label for="mh_id">mh_id</label>
						<input id="mh_id" type="text" name="mh_id" placeholder="mh_id">
					</div>
					<div class="input-field">
						<label for="role_email">role_email</label>
						<input id="role_email" type="text" name="role_email" placeholder="role_email">
					</div>
					<div class="input-field">
						<label for="title">title</label>
						<input id="title" type="text" name="title" placeholder="title">
					</div>
					<div class="input-field">
						<label for="gender">gender</label>
						<input id="gender" type="text" name="gender" placeholder="gender">
					</div>
					<div class="input-field">
						<label for="extended_expiry">extended_expiry</label>
						<input id="extended_expiry" type="text" name="extended_expiry" placeholder="extended_expiry">
					</div>
				</div>
		</div>

		<input class="btn" type="submit" name="update">
		<input class="btn" type="submit" name="ex-employee" value="EX EMP">
		</form>
	</div>

	<!-- </form> -->

	<!--JavaScript at end of body for optimized loading-->
	<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="./js/materialize.min.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			var search_btn = document.getElementById('email_search');
			var email = document.getElementById('data')
			search_btn.addEventListener('click', function () {
				var formData = new FormData();
				formData.append("data", email.value);
				var ajax = new XMLHttpRequest();
				ajax.onreadystatechange = function () {
					if (this.readyState == 4 && this.status == 200) {
						console.log(this.responseText);
						var response = JSON.parse(this.responseText);
						console.log(response[0]);
						document.getElementById('prof_pic').src = response[0]['photo'];
						delete response[0]["photo_disp"];
						delete response[0]["photo"];
						delete response[0]["tiled"];
						console.log(response[0]);
						for (var i in response[0]) {
							console.log(i);
							document.getElementById(i).value = response[0][i];
						}
					}
				}
				ajax.open("POST", "include/search.php", true);
				ajax.send(formData);
			});

			function handleFileSelect(evt) {
				if (evt.target.files != null) {
					var file = evt.target.files;
				}
				if (file) {
					var f = file[0];
					var reader = new FileReader();

					reader.onload = (function (theFile) {
						return function (e) {
							document.getElementById('prof_pic').src = e.target.result;
							document.getElementById('prof_pic').style.boxShadow = "0 2px 2px 0 rgba(0,0,0,0.2)";
							document.getElementById('prof_pic').style.width = "100px";
							// document.getElementById('prof_pic').style.height = "200px";
						};
					})(f);

					reader.readAsDataURL(f);
				}
			}

			document.getElementById('chooser').addEventListener('change', handleFileSelect);
		});
	</script>
</body>

</html>